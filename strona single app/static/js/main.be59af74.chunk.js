(this["webpackJsonpauto-collector"]=this["webpackJsonpauto-collector"]||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},15:function(e,t,a){},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(8),r=a.n(l),i=(a(15),a(1)),o=a(2),c=a(5),u=a(4),m=a(3),p=(a(16),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={newUrl:""},n.updateURL=n.updateURL.bind(Object(c.a)(n)),n.handleNewURL=n.handleNewURL.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"updateURL",value:function(e){this.setState({newUrl:e.target.value})}},{key:"handleNewURL",value:function(){this.props.addNew(this.state.newUrl)}},{key:"render",value:function(){return s.a.createElement("div",{className:"config-item"},s.a.createElement("h2",null,"Configure your App"),s.a.createElement("h3",null,"Amazon API Gateway"),s.a.createElement("div",{className:"config-item-input"},s.a.createElement("input",{type:"text",value:this.state.updateURL,onChange:this.updateURL,placeholder:"https://invokeurl/prod/vehicles"})),s.a.createElement("h6",null,"Format: https://restapi_id.execute-api.region.amazonaws.com/stage_name/vehicles"),s.a.createElement("br",null),s.a.createElement("button",{onClick:this.handleNewURL},"Load Backend Data"))}}]),a}(s.a.Component)),d=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"mobile-container"},Array.isArray(this.props.items)&&this.props.items.map((function(t){return s.a.createElement("div",{key:t.id,className:"mobile-item"},s.a.createElement("h2",null,t.name," "),s.a.createElement("div",{className:"mobile-item-detail"},s.a.createElement("div",{className:"mobile-item-id"},s.a.createElement("strong",null,"ID")," ",t.id),s.a.createElement("div",{className:"mobile-item-type"},s.a.createElement("strong",null,"Type"),"  ",t.type),s.a.createElement("button",{className:"mobile-item-button",onClick:e.props.loadPetDetail.bind(e,t.id)},"Details")))})))}}]),a}(s.a.Component),h=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"mobile-container"},s.a.createElement("div",{className:"mobile-item"},s.a.createElement("h2",null,this.props.header),s.a.createElement("p",null,this.props.msg)))}}]),a}(s.a.Component),f="UNSET",E="LOADING",b="MOCK",v="URL_INVALID",g="URL_FORBIDDEN",O="URL_NO_CORS",S="INTERNAL_SERVER_ERROR",N="FIND_ALL",R="FIND_DETAIL",y="ERROR",A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return console.log("Props ===> ",this.props.items),s.a.createElement("div",{className:"mobile-container"},s.a.createElement("div",{key:this.props.item.id,className:"mobile-item"},s.a.createElement("h2",null,this.props.item.name," "),s.a.createElement("div",{className:"mobile-item-detail"},s.a.createElement("div",{className:"mobile-item-id"},s.a.createElement("strong",null,"ID")," ",this.props.item.id),s.a.createElement("div",{className:"mobile-item-type"},s.a.createElement("strong",null,"Type"),"  ",this.props.item.type),s.a.createElement("div",{className:"mobile-item-fur"},s.a.createElement("strong",null,"Capacity"),"  ",this.props.item.capacity),s.a.createElement("button",{className:"mobile-item-button",onClick:this.props.reloadAllPets},"Back"))))}}]),a}(s.a.Component),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={id:""},n.details=n.details.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"details",value:function(e){this.props.details(e)}},{key:"render",value:function(){switch(this.props.appState){case f:return s.a.createElement("div",null,s.a.createElement(h,{header:"Vehicle App",msg:"Please, configure the app backend API to fetch the data."}));case E:return s.a.createElement("div",null,s.a.createElement(h,{header:"Welcome to the Vehicle App",msg:"Loading..."}));case N:return s.a.createElement("div",null,s.a.createElement(d,{items:this.props.items,loadPetDetail:this.props.loadPetDetail}));case R:return s.a.createElement("div",null,s.a.createElement(A,{item:this.props.item,reloadAllPets:this.props.reloadAllPets}));case"ERROR":default:return s.a.createElement("div",null,s.a.createElement(h,{header:"Attention",msg:"The Vehicle App couldn't fetch the data"}))}}}]),a}(s.a.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"Communication Status"),s.a.createElement("div",{className:"code"},this.props.msg))}}]),a}(s.a.Component),w=a(6),D=a.n(w),k=a(9),I=function e(t,a,n){Object(i.a)(this,e),this.appState=t,this.message=a,this.json=n},U=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"getData",value:function(){var e=Object(k.a)(D.a.mark((function e(t,a){var n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("url ",t," type",a),this.isURLValid(t)){e.next=3;break}return e.abrupt("return",new I(v,"URL Invalid "+t,null));case 3:return e.next=5,fetch(t).catch((function(e){throw new I(O,"URL NO CORS FOR THIS CLIENT "+t,null)}));case 5:if(403!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",new I(g,"URL FORBIDDEN (403) "+t,null));case 8:if(502!==n.status&&500!==n.status){e.next=10;break}return e.abrupt("return",new I(S,"INTERNAL SERVER ERROR  (502) or (500)"+t,null));case 10:if(200!==n.status||"cors"!==n.type){e.next=20;break}return e.next=13,n.json().catch((function(e){throw new I(b,"MOCK Detect",null)}));case 13:if(s=e.sent,"findAll"!==a){e.next=18;break}return e.abrupt("return",new I(N,"FIND ALL PETS",s));case 18:if("findDetail"!==a){e.next=20;break}return e.abrupt("return",new I(R,"FIND DETAIL",s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"isURLValid",value:function(e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)}}]),e}(),P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).loadAllPets=function(e){n.setState((function(t){return{apiUrl:e,baseUrl:e,statusmsg:"Loading from\n"+e,typeLoad:"findAll"}})),(new U).getData(e,"findAll").then(n.handleResult).catch(n.handleError)},n.loadPetDetail=function(e){console.log("Dentro do LoadDetail",e);var t=n.state.apiUrl;t.endsWith("/")?t+=e:t=t+"/"+e,n.setState((function(e){return{apiUrl:t,statusmsg:"Loading from\n"+t,typeLoad:"findDetail"}})),(new U).getData(t,"findDetail").then(n.handleResult).catch(n.handleError)},n.reloadAllPets=function(){var e=n.state.baseUrl;n.loadAllPets(e)},n.handleResult=function(e){console.log("APP ===>",e);var t=n.state.apiUrl;return e.appState===v&&(console.log("URL INVALID => ",e.message),n.setState({appState:y,statusmsg:'"'.concat(t,'" is not a valid url')})),e.appState===g&&(console.log("URL FORBIDDEN (403)",e.message),n.setState({appState:y,statusmsg:"This app is not allowed to communicate with this url \n\nGETS \n".concat(t,'\nStatus: 502 \nBody: {"message":"Missing Authentication Token"}')})),e.appState===S&&(console.log("INTERNAL SERVER ERROR  (502)",e.message),n.setState({appState:y,statusmsg:"The App received a Internal Server Error from Server, \nverify your backend.\n\nGET \n".concat(t,'\nStatus: 500 \nBody: {"message": "Internal server error"}')})),e.appState===N&&n.setState({appState:N,statusmsg:"The App received data from the API. \n\nGET \n".concat(t,"\nStatus: 200 \nBody: ").concat(JSON.stringify(e.json,null,2)),items:e.json}),e.appState===R&&n.setState({appState:R,statusmsg:"The App received data from the API. \n\nGET \n".concat(t,"\nStatus: 200 \nBody: ").concat(JSON.stringify(e.json,null,2)),item:e.json}),e},n.handleError=function(e){var t=n.state.apiUrl;console.log("ERRO => ",e),e.appState===b&&(console.log("ACTION MOCK (200) No JSON"),n.setState({appState:b,statusmsg:"The App received a response from the API, but the data \nis empty.\n\nGET \n".concat(t,"\nStatus: 200 \nBody: Empty")})),e.appState===O&&(console.log("NO CORS FOR THIS CLIENT "+e.message),n.setState({appState:y,statusmsg:"This app is not allowed to communicate with this url \n\nGET \n".concat(t,'\nStatus: 502 \nBody: {"message":"Missing Authentication Token"}')}))},n.state={apiUrl:"",appState:f,items:[],statusmsg:"",typeLoad:"",baseUrl:""},n.loadAllPets=n.loadAllPets.bind(Object(c.a)(n)),n.loadPetDetail=n.loadPetDetail.bind(Object(c.a)(n)),n.reloadAllPets=n.reloadAllPets.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({statusmsg:"Loading ....................OK \n\nWaiting for the configuration."})}},{key:"render",value:function(){return s.a.createElement("div",{className:"app-container"},s.a.createElement("div",{className:"config"},s.a.createElement(p,{addNew:this.loadAllPets})),s.a.createElement("div",{className:"message"},s.a.createElement(L,{appState:this.state.appState,msg:this.state.statusmsg})),s.a.createElement("div",{className:"mobile"},s.a.createElement("div",{className:"mobile__screen"},s.a.createElement("div",{className:"mobile__scroll-cont"},s.a.createElement("div",{className:"mobile_content"},s.a.createElement(j,{appState:this.state.appState,items:this.state.items,item:this.state.item,loadPetDetail:this.loadPetDetail,reloadAllPets:this.reloadAllPets}))))))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.be59af74.chunk.js.map